# Git数据的存储方式
- 大部分的版本控制记录的是每一个版本之间文件的差异CVS、Subversion、Perforce、Bazaar 等等）它们通常称作 基于差异（delta-based） 的版本控制
![image](https://git-scm.com/book/en/v2/images/deltas.png)
- Git 更像是把数据看作是对小型文件系统的一系列快照。 在 Git 中，每当你提交更新或保存项目状态时，它基本上就会对当时的全部文件创建一个快照并保存这个快照的索引。Git 对待数据更像是一个快照流。

![image](https://git-scm.com/book/en/v2/images/snapshots.png)

# Git保证数据完整性的方式
- Git 中所有的数据在存储前都计算校验和，然后以校验和来引用。
- Git 用以计算校验和的机制叫做 SHA-1 散列（hash，哈希）。 这是一个由 40 个十六进制字符（0-9 和 a-f）组成的字符串，基于 Git 中文件的内容或目录结构计算出来。 SHA-1 哈希看起来是这样：
```
24b9da6552252987aa493b52f8696cd6d3b00373
```
- 实际上，Git 数据库中保存的信息都是以文件内容的哈希值来索引，而不是文件名。

# Git管理数据的三种状态
Git 有三种状态，你的文件可能处于其中之一： **已提交（committed）、已修改（modified） 和 已暂存（staged）。**
- 已修改表示修改了文件，但还没保存到数据库中。

- 已暂存表示对一个已修改文件的当前版本做了标记，使之包含在下次提交的快照中。
- 已提交表示数据已经安全地保存在本地数据库中。

# Git托管项目的三个阶段
**官方的说法是三个阶段，我理解为三个区域**分别是**工作目录、暂存区域以及 Git 仓库.**

- 工作区是对项目的某个版本独立提取出来的内容。 这些从 Git 仓库的压缩数据库中提取出来的文件，放在磁盘上供你使用或修改。（通俗的讲就是你当前项目的目录内容）

- 暂存区是一个文件，保存了下次将要提交的文件列表信息，一般在 Git 仓库目录中。 按照 Git 的术语叫做“索引”，不过一般说法还是叫“暂存区”。
- Git 仓库目录是 Git 用来保存项目的元数据和对象数据库的地方。 这是 Git 中最重要的部分，从其它计算机克隆仓库时，复制的就是这里的数据。

# 基本的 Git 工作流程
1. 在工作区中修改文件。
2. 将你想要下次提交的更改选择性地暂存，这样只会将更改的部分添加到暂存区。
3. 提交更新，找到暂存区的文件，将快照永久性存储到 Git 目录。

# 普通操作
1. 在已存在目录中初始化仓库
```
git init
```
2. 克隆现有的仓库
```
git clone <url>
```
3. 检查当前文件状态
```
git clone <url>
```
3. 跟踪新文件（添加文件到暂存区）

```
git add <filename>(git add命令使用文件或目录的路径作为参数；如果参数是目录的路径，该命令将递归地跟踪该目录下的所有文件。)
```
4. 提交更新

```
git commit -m "提交信息"
```
5. 移除文件(从暂存区域移除,连带从工作目录中删除指定的文件)
```
# 如果要删除之前修改过或已经放到暂存区的文件，则必须使用强制删除选项 -f
git rm <filename>
```
6. 文件保留在磁盘，但是并不想让 Git 继续跟踪
```
# 如果要删除之前修改过或已经放到暂存区的文件，则必须使用强制删除选项 -f
git rm --cached <filename>
```
7. 移动文件
```
git mv file_from file_to
```
8. 查看提交历史
```
git log
```

# 远程仓库的使用
1. 查看远程仓库
```
git remote 
```
2. 添加远程仓库（shortname是url的别名）
```
git remote add <shortname> <url> 
```
3. 从远程仓库中抓取与拉取数据
```
git fetch <remote>

# 这个命令会访问远程仓库，从中拉取所有你还没有的数据。 执行完成后，你将会拥有那个远程仓库中所有分支的引用，可以随时合并或查看。

# 说明
如果你使用 clone 命令克隆了一个仓库，命令会自动将其添加为远程仓库并默认以 “origin” 为简写。 
所以，git fetch origin 会抓取克隆（或上一次抓取）后新推送的所有工作。 

必须注意 git fetch 命令只会将数据下载到你的本地仓库——它并不会自动合并或修改你当前的工作。
当准备好时你必须手动将其合并入你的工作。
```
4. 推送到远程仓库
```
git push <remote> <branch>
# 要将 master 分支推送到 origin 服务器时（再次说明，克隆时通常会自动帮你设置好那两个名字）
git push origin master

# 说明
只有当你有所克隆服务器的写入权限，并且之前没有人推送过时，这条命令才能生效。
当你和其他人在同一时间克隆，他们先推送到上游然后你再推送到上游，你的推送就会毫无疑问地被拒绝。
你必须先抓取他们的工作并将其合并进你的工作后才能推送。
```
5. 查看某个远程仓库
```
git remote show <remote>
```
6. 远程仓库的重命名
```
# 将 pb 重命名为 paul
git remote rename pb paul
```
7. 远程仓库的删除
```
git remote remove <remote>
```
# 分支管理

1. 查看前所有分支的一个列表：
```
git branch
```

2. 查看前已合并/未合并列表：
```
git branch --merged(git branch --no-merged)
```

3. 查看各个分支当前所指的对象
```
git log --oneline --decorate
```


4. 创建分支（创建一个 testing 分支）
```
git branch testing
```

5. 切换分支（切换到 testing 分支，切换之前记得提交已修改文件（commit））
```
git checkout testing
```

6. 创建并切换分支
```
git checkout -b <newbranchname>
```

7. 合并分支
```
 假设你切换到testing分支，并且作了改变，想把改变合并到master分支
 1.先使用git checkout master切换到master分支
 2.使用git merge testing合并testing分支到master分支
```

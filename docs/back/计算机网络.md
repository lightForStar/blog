# 计算机网络

## TCP

### TCP概述

TCP是面向连接的传输层协议，在IP服务的基础上提供可靠的传输服务

**特点**

- 面向连接
- 端对端（一对一）
- 全双工
- 面向字节流

 ## 传输分组可能会遇到的问题

### 分组出现差错

接收端接收到的分组在传输时由于某些原因被改变了

解决：接收端丢弃错误分组，发送端设置超时定时器，一段时间没收到确认后重发分组

###  确认丢失

接收端接收到分组后返回的ACK丢失

解决：发送端设置超时定时器，一段时间没收到确认后重发分组，接收端收到分组后由于有了重复的分组，此分组丢弃，同时回复ACK确认

### 确认迟到

A发送给B的分组B收到了，但是返回的ACK延迟到A端，A的超时计时器过期重新发送分组，此时B丢弃重复的分组并且再一次发送ACK，此时A端会收到两个

重复的ACK，丢弃晚到的ACK

![image-20200531113826476](https://lightforstar.oss-cn-shenzhen.aliyuncs.com/blog/image-20200531113826476.png)

## 如何保证可靠传输

由于IP层不能保证数据传输的可靠性，想要获得可靠传输的效果，我们必须依赖与一些协议保证数据丢失后能及时发现并且再次发送

### 停止等待协议

每传送一个分组停下来等待ACK确认信号，收到ACK后再发送新的分组，使用确认和自动重传机制（ARQ）确保传输的可靠性

**缺点**：信道利用率低，等待时间长

### 连续ARQ协议

发送方使用滑动窗口一次可以发出多个分组，每收到一个确认发送方向前移动窗口，接收方维护接收窗口采取累计确认的方式回复按序到达的最后一个分组

代表前面的分组已经收到了

![image-20200531150424623](https://lightforstar.oss-cn-shenzhen.aliyuncs.com/blog/image-20200531150424623.png)

**分组丢失的处理：**采取回退N的方式，如发送方发送了前5个分组但是中间第三个分组丢失了，接收方只能对前两个分组确认，发送方必须重传剩下的3个分组，这就是Go-back-N回退N

### 两种协议的对比

![image-20200531152642213](https://lightforstar.oss-cn-shenzhen.aliyuncs.com/blog/image-20200531152642213.png)



## 流量控制

## 拥塞控制


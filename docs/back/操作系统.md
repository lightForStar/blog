# 操作系统

## 计算机系统的结构

现代计算机由一个或者多个处理器、主存、磁盘、网络接口以及各种输入输出设备组成。

## 什么是操作系统？

操作系统是置于计算机硬件上的一层软件，对于操作系统我们可以从以下两个角度解析

1. 资源管理者（自底向上）

   从计算机硬件的角度看，操作系统负责管理每一个硬件资源，并且在应用程序需要的时候进行分配

2. 抽象接口的提供者（自上而下）

   从应用程序的角度看，操作系统帮助应用程序屏蔽了底层硬件的使用细节，为硬件提供了抽象接口。在没有操作系统的时候，我们想要使用硬盘就必须了解硬盘的硬件接口，直接操控硬件接口完成写入和读取，而操作系统出现之后一切都变得更加便利了，操作系统抽象出文件的概念，我们需要往硬盘读取和写入时只需要调用操作系统提供的抽象接口。

## 操作系统所处的位置

![image-20200802191619869](https://lightforstar.oss-cn-shenzhen.aliyuncs.com/blog/image-20200802191619869.png)

## 操作系统的演变

**大概的划分，每个一代的演变都有重叠的部分**

1. 原始机器无操作系统（真空管计算机）

   单道程序处理，一次只能运行一个任务，最原始的时代利用电路、机器语言编写程序，每修改一次程序就改变电路，运行程序非常繁琐，后面出现了穿孔卡片程序可以写入到卡片中

2. 批处理系统（晶体管计算机）

   计算机同时读入多个任务，批量处理

3. 分时系统（集成电路）

   多个终端轮流使用，由于处理任务的时间短，用户无感知有多个人同时使用一台机器的资源。

4. 现代操作系统，如windows、linux

 

## select、poll、epoll

select：不断的轮询socket是否准备好，每次都是O(n)遍历所有的socket

epoll：设备就绪后将socket加入到就绪列表，遍历就绪列表即可，近似认为是O（1）的复杂度，筛选了其他状态的socket

I/O的两个阶段

1、I/O设备准备好数据，以read为例，从硬盘（I/O设备）中读取数据到内核空间

2、数据从内核空间拷贝到用户空间